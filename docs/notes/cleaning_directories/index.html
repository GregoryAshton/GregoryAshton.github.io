<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="author" content="Gregory Ashton">
    <link rel="canonical" href="https://www.GregoryAshton.github.io/notes/cleaning_directories/">
    <link rel="shortcut icon" href="../../img/favicon.ico">

    
    <title>Cleaning up directories - Gregory Ashton</title>
    

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/v4-shims.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.min.css">
    <link href='//rsms.me/inter/inter.css' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../../css/base.min.css" rel="stylesheet">
    <link href="../../css/cinder.min.css" rel="stylesheet">

    
        
        <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/styles/github.min.css">
        
    

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]-->

    

     
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            
              <a class="navbar-brand" href="../..">Gregory Ashton</a>
            
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">Home</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../science/">Science</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../group/">Group</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../projects/">Projects</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../help/">Help</a>
                    </li>
                
                
                
                    <li >
                        <a href="../">Notes</a>
                    </li>
                
                
                </ul>

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fas fa-search"></i> Search
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/GregoryAshton/GregoryAshton.github.io/edit/master/docs/notes/cleaning_directories.md"><i class="fab fa-github"></i> Edit on GitHub</a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#cleaning-up-directories">Cleaning up directories</a></li>
            <li class="second-level"><a href="#finding-the-data">Finding the data</a></li>
                
            <li class="second-level"><a href="#removing-the-data">Removing the data</a></li>
                
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="cleaning-up-directories">Cleaning up directories</h1>
<p>Using a computing cluster (or even your own machine), for many years, it is probable that things get messy and disorganised.
As you complete projects, the code and results often go stale, but you keep them `just in case'.
This is okay for a while, but eventually you'll be told you have TBs of storage and most of it is many years old. At this point, it is time to clean up.</p>
<h2 id="finding-the-data">Finding the data</h2>
<p>The first job is to figure out where the data is before you decide what to delete.</p>
<ul>
<li><strong>LIGO Data Grid visualisation tools</strong>: If you are working on the LIGO clusters, you can find information about your home directories from regular scans at <a href="https://ldas-gridmon.ligo.caltech.edu/diskusage/">this website</a>. If you find your name and click the link it will give you a visualisation. If you are working on a different cluster, then contact the administrators who may be able to point you to a similar tool.</li>
<li><strong>Summarise by directory</strong>: If you don't have a visualisation tool to guide you, you can use standard UNIX tools. For example, if you use the <code>du</code> (disk usage tool) as follows:
    <div class="highlight"><pre><span></span><code>$<span class="w"> </span>du<span class="w"> </span>-sh<span class="w"> </span>*
<span class="m">4</span>.3M<span class="w"> </span>directory_1/
16M<span class="w"> </span>directory_2/
50GB<span class="w"> </span>directory_3/
<span class="m">5</span><span class="w"> </span>file.txt
</code></pre></div>
  you can start at the top level and drill down picking out which directories are large and okay to be removed.
  You can also count the number of files by using <code>find</code>:
    <div class="highlight"><pre><span></span><code>$ find &lt;directory&gt; -type f | wc -l
23
</code></pre></div>
  However, bear in mind that <code>find</code> will be doing a search: so if there are many files in subdirectories you may find this very slow.</li>
</ul>
<h2 id="removing-the-data">Removing the data</h2>
<p>Once you know where the data is and you have decided to delete it, then of course you can just use <code>rm</code> to remove it. However, typically you will have directories which have a mix of lightweight configuration files and heavyweight result files and possibly also some log files. It is often wise to remove the result files and log files, but keep the configuration files for future reference (after all, they are usually only a few MB). 
You can use <code>find</code> to delete files with a certain type. First, search for them using a command like
<div class="highlight"><pre><span></span><code>find . -name &quot;*.json&quot; -type f
</code></pre></div>
This will find all <code>json</code> file types and print them to the terminal. If you are happy you won't be deleting something that you want to keep, you can then delete them with
<div class="highlight"><pre><span></span><code>find . -name &quot;*.json&quot; -type f -delete
</code></pre></div>
Typically, it is best to avoid delete many thousand files at once, but say focus on a specific project or folder.</p></div>
        
        
    </div>

    
      <footer class="col-md-12 text-center">
          
          
            <hr>
            <p>
            <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</small>
            </p>
          

          
          
      </footer>
    
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="../../js/bootstrap-3.0.3.min.js"></script>

    
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/highlight.min.js"></script>
        
    <script>hljs.initHighlightingOnLoad();</script>
    

    <script>var base_url = "../.."</script>
    
    <script src="../../js/base.js"></script>
    <script src="../../search/main.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    </body>

</html>
